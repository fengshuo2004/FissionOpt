<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8" />
    <title>核电工艺反应堆设计生成器</title>
    <link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
    <link rel="stylesheet" href="main.css"/>
    <script src="https://code.jquery.com/jquery-3.5.0.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
    <script src="FissionOpt.js"></script>
    <script src="main.js"></script>
  </head>
  <body>
    <header>
      <div>
        <h2>《核电工艺》裂变反应堆设计生成器</h2>
        作者cyb0124 汉化PEK97, <a href="https://github.com/fengshuo2004/FissionOpt">源代码</a>
      </div>
      <div>
        本工具生成裂变反应堆设计，将输出功率、燃料消耗速度或效率最大化。
        本页面适用于非重制版的核电工艺，即大多数整合包用的版本。
        《核电工艺：重制版》的玩家请点击<a href="/overhaul.html">这里</a>。
      </div>
    </header>
    <section id="settings">
      <div>
        <b>第一步</b>：输入反应堆堆芯（内部）的尺寸：
        <input type="text" id="sizeZ"> &times;
        <input type="text" id="sizeX"> &times;
        <input type="text" id="sizeY">
      </div>
      <div>
        <b>第二步</b>：在下方表格中点击你要使用的燃料类型。除了《Enigmatica 2: Expert》和《臭氧计划3》，整合包一般不改配置。
        或者手动在下方的文本框内输入燃料数据。
        燃料数据会显示在鼠标悬停提示里。不要使用JEI里显示的数据，其中可能存在错误。
        你也能使用《工业时代2》和《极限反应堆》的燃料。请见下表。
      </div>
      <div>燃料功率基数：<input type="text" id="fuelBasePower"> RF/t</div>
      <div>燃料热量基数：<input text="text" id="fuelBaseHeat"> H/t</div>
      <div class="fuelPresets"><table>
        <thead><tr><td>配置</td>
          <td>铀锭</td>
          <td>TBU</td>
          <td>LEU-235</td>
          <td>HEU-235</td>
          <td>LEU-233</td>
          <td>HEU-233</td>
          <td>LEN-236</td>
          <td>HEN-236</td>
          <td>MOX-239</td>
          <td>MOX-241</td>
          <td>LEP-239</td>
          <td>HEP-239</td>
          <td>LEP-241</td>
          <td>HEP-241</td>
          <td>LEA-242</td>
          <td>HEA-242</td>
          <td>LECm-243</td>
          <td>HECm-243</td>
          <td>LECm-245</td>
          <td>HECm-245</td>
          <td>LECm-247</td>
          <td>HECm-247</td>
          <td>LEB-248</td>
          <td>HEB-248</td>
          <td>LECf-249</td>
          <td>HECf-249</td>
          <td>LECf-251</td>
          <td>HECf-251</td>
        </tr></thead>
        <tr><th>默认</th>
          <td>&mdash;</td>
          <td><a href="javascript:;" id="DefTBU">普通</a>
          <br><a href="javascript:;" id="DefTBUO">氧化</a></td>
          <td><a href="javascript:;" id="DefLEU235">普通</a>
          <br><a href="javascript:;" id="DefLEU235O">氧化</a></td>
          <td><a href="javascript:;" id="DefHEU235">普通</a>
          <br><a href="javascript:;" id="DefHEU235O">氧化</a></td>
          <td><a href="javascript:;" id="DefLEU233">普通</a>
          <br><a href="javascript:;" id="DefLEU233O">氧化</a></td>
          <td><a href="javascript:;" id="DefHEU233">普通</a>
          <br><a href="javascript:;" id="DefHEU233O">氧化</a></td>
          <td><a href="javascript:;" id="DefLEN236">普通</a>
          <br><a href="javascript:;" id="DefLEN236O">氧化</a></td>
          <td><a href="javascript:;" id="DefHEN236">普通</a>
          <br><a href="javascript:;" id="DefHEN236O">氧化</a></td>
          <td><a href="javascript:;" id="DefMOX239">载入</a></td>
          <td><a href="javascript:;" id="DefMOX241">载入</a></td>
          <td><a href="javascript:;" id="DefLEP239">普通</a>
          <br><a href="javascript:;" id="DefLEP239O">氧化</a></td>
          <td><a href="javascript:;" id="DefHEP239">普通</a>
          <br><a href="javascript:;" id="DefHEP239O">氧化</a></td>
          <td><a href="javascript:;" id="DefLEP241">普通</a>
          <br><a href="javascript:;" id="DefLEP241O">氧化</a></td>
          <td><a href="javascript:;" id="DefHEP241">普通</a>
          <br><a href="javascript:;" id="DefHEP241O">氧化</a></td>
          <td><a href="javascript:;" id="DefLEA242">普通</a>
          <br><a href="javascript:;" id="DefLEA242O">氧化</a></td>
          <td><a href="javascript:;" id="DefHEA242">普通</a>
          <br><a href="javascript:;" id="DefHEA242O">氧化</a></td>
          <td><a href="javascript:;" id="DefLECm243">普通</a>
          <br><a href="javascript:;" id="DefLECm243O">氧化</a></td>
          <td><a href="javascript:;" id="DefHECm243">普通</a>
          <br><a href="javascript:;" id="DefHECm243O">氧化</a></td>
          <td><a href="javascript:;" id="DefLECm245">普通</a>
          <br><a href="javascript:;" id="DefLECm245O">氧化</a></td>
          <td><a href="javascript:;" id="DefHECm245">普通</a>
          <br><a href="javascript:;" id="DefHECm245O">氧化</a></td>
          <td><a href="javascript:;" id="DefLECm247">普通</a>
          <br><a href="javascript:;" id="DefLECm247O">氧化</a></td>
          <td><a href="javascript:;" id="DefHECm247">普通</a>
          <br><a href="javascript:;" id="DefHECm247O">氧化</a></td>
          <td><a href="javascript:;" id="DefLEB248">普通</a>
          <br><a href="javascript:;" id="DefLEB248O">氧化</a></td>
          <td><a href="javascript:;" id="DefHEB248">普通</a>
          <br><a href="javascript:;" id="DefHEB248O">氧化</a></td>
          <td><a href="javascript:;" id="DefLECf249">普通</a>
          <br><a href="javascript:;" id="DefLECf249O">氧化</a></td>
          <td><a href="javascript:;" id="DefHECf249">普通</a>
          <br><a href="javascript:;" id="DefHECf249O">氧化</a></td>
          <td><a href="javascript:;" id="DefLECf251">普通</a>
          <br><a href="javascript:;" id="DefLECf251O">氧化</a></td>
          <td><a href="javascript:;" id="DefHECf251">普通</a>
          <br><a href="javascript:;" id="DefHECf251O">氧化</a></td>
        </tr>
        <tr><th>E2:E</th>
          <td><a href="javascript:;" id="E2EUraniumIngot">载入</a></td>
          <td><a href="javascript:;" id="E2ETBU">普通</a>
          <br><a href="javascript:;" id="E2ETBUO">氧化</a></td>
          <td><a href="javascript:;" id="E2ELEU235">普通</a>
          <br><a href="javascript:;" id="E2ELEU235O">氧化</a></td>
          <td><a href="javascript:;" id="E2EHEU235">普通</a>
          <br><a href="javascript:;" id="E2EHEU235O">氧化</a></td>
          <td><a href="javascript:;" id="E2ELEU233">普通</a>
          <br><a href="javascript:;" id="E2ELEU233O">氧化</a></td>
          <td><a href="javascript:;" id="E2EHEU233">普通</a>
          <br><a href="javascript:;" id="E2EHEU233O">氧化</a></td>
          <td><a href="javascript:;" id="E2ELEN236">普通</a>
          <br><a href="javascript:;" id="E2ELEN236O">氧化</a></td>
          <td><a href="javascript:;" id="E2EHEN236">普通</a>
          <br><a href="javascript:;" id="E2EHEN236O">氧化</a></td>
          <td><a href="javascript:;" id="E2EMOX239">载入</a></td>
          <td><a href="javascript:;" id="E2EMOX241">载入</a></td>
          <td><a href="javascript:;" id="E2ELEP239">普通</a>
          <br><a href="javascript:;" id="E2ELEP239O">氧化</a></td>
          <td><a href="javascript:;" id="E2EHEP239">普通</a>
          <br><a href="javascript:;" id="E2EHEP239O">氧化</a></td>
          <td><a href="javascript:;" id="E2ELEP241">普通</a>
          <br><a href="javascript:;" id="E2ELEP241O">氧化</a></td>
          <td><a href="javascript:;" id="E2EHEP241">普通</a>
          <br><a href="javascript:;" id="E2EHEP241O">氧化</a></td>
          <td><a href="javascript:;" id="E2ELEA242">普通</a>
          <br><a href="javascript:;" id="E2ELEA242O">氧化</a></td>
          <td><a href="javascript:;" id="E2EHEA242">普通</a>
          <br><a href="javascript:;" id="E2EHEA242O">氧化</a></td>
          <td><a href="javascript:;" id="E2ELECm243">普通</a>
          <br><a href="javascript:;" id="E2ELECm243O">氧化</a></td>
          <td><a href="javascript:;" id="E2EHECm243">普通</a>
          <br><a href="javascript:;" id="E2EHECm243O">氧化</a></td>
          <td><a href="javascript:;" id="E2ELECm245">普通</a>
          <br><a href="javascript:;" id="E2ELECm245O">氧化</a></td>
          <td><a href="javascript:;" id="E2EHECm245">普通</a>
          <br><a href="javascript:;" id="E2EHECm245O">氧化</a></td>
          <td><a href="javascript:;" id="E2ELECm247">普通</a>
          <br><a href="javascript:;" id="E2ELECm247O">氧化</a></td>
          <td><a href="javascript:;" id="E2EHECm247">普通</a>
          <br><a href="javascript:;" id="E2EHECm247O">氧化</a></td>
          <td><a href="javascript:;" id="E2ELEB248">普通</a>
          <br><a href="javascript:;" id="E2ELEB248O">氧化</a></td>
          <td><a href="javascript:;" id="E2EHEB248">普通</a>
          <br><a href="javascript:;" id="E2EHEB248O">氧化</a></td>
          <td><a href="javascript:;" id="E2ELECf249">普通</a>
          <br><a href="javascript:;" id="E2ELECf249O">氧化</a></td>
          <td><a href="javascript:;" id="E2EHECf249">普通</a>
          <br><a href="javascript:;" id="E2EHECf249O">氧化</a></td>
          <td><a href="javascript:;" id="E2ELECf251">普通</a>
          <br><a href="javascript:;" id="E2ELECf251O">氧化</a></td>
          <td><a href="javascript:;" id="E2EHECf251">普通</a>
          <br><a href="javascript:;" id="E2EHECf251O">氧化</a></td>
        </tr>
        <tr><th>臭氧计划3</th>
          <td>&mdash;</td>
          <td><a href="javascript:;" id="PO3TBU">普通</a>
          <br><a href="javascript:;" id="PO3TBUO">氧化</a></td>
          <td><a href="javascript:;" id="PO3LEU235">普通</a>
          <br><a href="javascript:;" id="PO3LEU235O">氧化</a></td>
          <td><a href="javascript:;" id="PO3HEU235">普通</a>
          <br><a href="javascript:;" id="PO3HEU235O">氧化</a></td>
          <td><a href="javascript:;" id="PO3LEU233">普通</a>
          <br><a href="javascript:;" id="PO3LEU233O">氧化</a></td>
          <td><a href="javascript:;" id="PO3HEU233">普通</a>
          <br><a href="javascript:;" id="PO3HEU233O">氧化</a></td>
          <td><a href="javascript:;" id="PO3LEN236">普通</a>
          <br><a href="javascript:;" id="PO3LEN236O">氧化</a></td>
          <td><a href="javascript:;" id="PO3HEN236">普通</a>
          <br><a href="javascript:;" id="PO3HEN236O">氧化</a></td>
          <td><a href="javascript:;" id="PO3MOX239">载入</a></td>
          <td><a href="javascript:;" id="PO3MOX241">载入</a></td>
          <td><a href="javascript:;" id="PO3LEP239">普通</a>
          <br><a href="javascript:;" id="PO3LEP239O">氧化</a></td>
          <td><a href="javascript:;" id="PO3HEP239">普通</a>
          <br><a href="javascript:;" id="PO3HEP239O">氧化</a></td>
          <td><a href="javascript:;" id="PO3LEP241">普通</a>
          <br><a href="javascript:;" id="PO3LEP241O">氧化</a></td>
          <td><a href="javascript:;" id="PO3HEP241">普通</a>
          <br><a href="javascript:;" id="PO3HEP241O">氧化</a></td>
          <td><a href="javascript:;" id="PO3LEA242">普通</a>
          <br><a href="javascript:;" id="PO3LEA242O">氧化</a></td>
          <td><a href="javascript:;" id="PO3HEA242">普通</a>
          <br><a href="javascript:;" id="PO3HEA242O">氧化</a></td>
          <td><a href="javascript:;" id="PO3LECm243">普通</a>
          <br><a href="javascript:;" id="PO3LECm243O">氧化</a></td>
          <td><a href="javascript:;" id="PO3HECm243">普通</a>
          <br><a href="javascript:;" id="PO3HECm243O">氧化</a></td>
          <td><a href="javascript:;" id="PO3LECm245">普通</a>
          <br><a href="javascript:;" id="PO3LECm245O">氧化</a></td>
          <td><a href="javascript:;" id="PO3HECm245">普通</a>
          <br><a href="javascript:;" id="PO3HECm245O">氧化</a></td>
          <td><a href="javascript:;" id="PO3LECm247">普通</a>
          <br><a href="javascript:;" id="PO3LECm247O">氧化</a></td>
          <td><a href="javascript:;" id="PO3HECm247">普通</a>
          <br><a href="javascript:;" id="PO3HECm247O">氧化</a></td>
          <td><a href="javascript:;" id="PO3LEB248">普通</a>
          <br><a href="javascript:;" id="PO3LEB248O">氧化</a></td>
          <td><a href="javascript:;" id="PO3HEB248">普通</a>
          <br><a href="javascript:;" id="PO3HEB248O">氧化</a></td>
          <td><a href="javascript:;" id="PO3LECf249">普通</a>
          <br><a href="javascript:;" id="PO3LECf249O">氧化</a></td>
          <td><a href="javascript:;" id="PO3HECf249">普通</a>
          <br><a href="javascript:;" id="PO3HECf249O">氧化</a></td>
          <td><a href="javascript:;" id="PO3LECf251">普通</a>
          <br><a href="javascript:;" id="PO3LECf251O">氧化</a></td>
          <td><a href="javascript:;" id="PO3HECf251">普通</a>
          <br><a href="javascript:;" id="PO3HECf251O">氧化</a></td>
        </tr>
      </table></div>
      <div>
        For ExtremeReactors' Yellorium or Blutonium, click LEU-235 Normal and then click <a href="javascript:;" id="br">here</a> once.<br>
        For IC2's Enriched Uranium Nuclear Fuel, click LEU-235 Normal and then click <a href="javascript:;" id="ic2">here</a> once.<br>
        For IC2's MOX Nuclear Fuel, click MOX-239 and then click <a href="javascript:;" id="ic2mox">here</a> once.
      </div>
      <div>
        <b>第三步</b>: If you want to limit the usage of a type of block, enter the maximum number allowed in the table below.
        Enter zero to completely disable that block. You can hover over the acronym to see the full name of each block.
        Active coolers are disabled by default. You can enable them by removing the zeros.
      </div>
      <table>
        <thead><tr id="blockType"><th>方块类型</th>
          <th class="Wt">水</th><th class="Rs">红</th><th class="Qz">晶</th>
          <th class="Au">金</th><th class="Gs">萤</th><th class="Lp">青</th>
          <th class="Dm">钻</th><th class="He">氦</th><th class="Ed">末</th>
          <th class="Cr">凛</th><th class="Fe">铁</th><th class="Em">翠</th>
          <th class="Cu">铜</th><th class="Sn">锡</th><th class="Mg">镁</th>
          <th class="cell">[]</th><th class="mod">##</th>
        </tr></thead>
        <tbody>
          <tr id="rate"><th>被动冷却速度 (H/t)</th>
            <td><input type="text"></td><td><input type="text"></td><td><input type="text"></td>
            <td><input type="text"></td><td><input type="text"></td><td><input type="text"></td>
            <td><input type="text"></td><td><input type="text"></td><td><input type="text"></td>
            <td><input type="text"></td><td><input type="text"></td><td><input type="text"></td>
            <td><input type="text"></td><td><input type="text"></td><td><input type="text"></td>
            <td>&mdash;</td><td>&mdash;</td>
          </tr>
          <tr id="limit"><th>最大用量</th>
            <td><input type="text"></td><td><input type="text"></td><td><input type="text"></td>
            <td><input type="text"></td><td><input type="text"></td><td><input type="text"></td>
            <td><input type="text"></td><td><input type="text"></td><td><input type="text"></td>
            <td><input type="text"></td><td><input type="text"></td><td><input type="text"></td>
            <td><input type="text"></td><td><input type="text"></td><td><input type="text"></td>
            <td><input type="text"></td><td><input type="text"></td>
          </tr>
          <tr id="activeRate"><th>主动冷却速度 (H/t)</th>
            <td><input type="text"></td><td><input type="text"></td><td><input type="text"></td>
            <td><input type="text"></td><td><input type="text"></td><td><input type="text"></td>
            <td><input type="text"></td><td><input type="text"></td><td><input type="text"></td>
            <td><input type="text"></td><td><input type="text"></td><td><input type="text"></td>
            <td><input type="text"></td><td><input type="text"></td><td><input type="text"></td>
            <td>&mdash;</td><td>&mdash;</td>
          </tr>
          <tr id="activeLimit"><th>主动型最大用量</th>
            <td><input type="text" value="0"></td><td><input type="text" value="0"></td><td><input type="text" value="0"></td>
            <td><input type="text" value="0"></td><td><input type="text" value="0"></td><td><input type="text" value="0"></td>
            <td><input type="text" value="0"></td><td><input type="text" value="0"></td><td><input type="text" value="0"></td>
            <td><input type="text" value="0"></td><td><input type="text" value="0"></td><td><input type="text" value="0"></td>
            <td><input type="text" value="0"></td><td><input type="text" value="0"></td><td><input type="text" value="0"></td>
            <td>&mdash;</td><td>&mdash;</td>
          </tr>
        </tbody>
      </table>
      <div>
        <b>Step 4</b>: Load the cooling rate data by clicking on one of the following modpack configs:
        <a href="javascript:;" id="DefRate">Default</a>
        <a href="javascript:;" id="E2ERate">E2E</a>
        <a href="javascript:;" id="PO3Rate">PO3</a>. Alternatively, you can enter the data yourself.
        Passive cooling rates are in the tooltip of each cooler item. Active cooling rates are in JEI.
      </div>
      <div>
        <b>第五步</b>：调整以下选项然后点击“运行”开始优化。<br>
        <label><input type="checkbox" id="ensureActiveCoolerAccessible" checked>确保液冷器可被管道连接</label><br>
        <label><input type="checkbox" id="ensureHeatNeutral" checked>只生成热中和的反应堆</label><br>
        <label><input type="radio" name="goal" value="0" checked>输出功率尽量大</label><br>
        <label><input type="radio" name="goal" value="1">燃料消耗尽量快</label><br>
        <label><input type="radio" name="goal" value="2">效率尽量高</label><br>
        <label><input type="checkbox" id="symZ" checked>X 轴对称</label>
        <label><input type="checkbox" id="symX" checked>Y 轴对称</label>
        <label><input type="checkbox" id="symY" checked>Z 轴对称</label><br>
        <label><input type="checkbox" id="useNet" checked>使用强化学习算法（会占用更多内存，计算稍慢但产出的设计会更好）</label><br>
        The most efficient reactor doesn't produce the most power. To get a efficient reactor that can still generate lots of power,
        you should optimize for power while limiting the cell count using the &ldquo;Max Allowed&rdquo; box for <span class="row cell" title="Reactor Cell">[]</span>.
        To get the ideal cell count, divide the fuel's base processing time by the time you want a fuel to last.
        Enabling symmetry and/or limiting block counts often speeds up the algorithm.
        The algorithm uses fixed seed: different runs will always yield the same results unless there is an update to the algorithm (last update: 5/19/2020).
        You can use <a href="https://www.curseforge.com/minecraft/mc-mods/building-gadgets">Building Gadgets</a> to automate the building of your reactor.
        To do so, save the JSON of your design, load it up in <a href="https://github.com/hellrage/NC-Reactor-Planner/releases/tag/v1.2.25">Hellrage's Reactor Planner</a>,
        and then click &ldquo;Generate BG string&rdquo;. Then you can paste it in the <a href="https://github.com/Direwolf20-MC/BuildingGadgets/wiki/Template-Manager">Template Manager</a>.<br>
        <span style="color:red;">注意：Chrome浏览器的标签页不能在后台运行！切换到其他标签页前先把本页拖到新窗口且不要最小化。</span>
      </div>
    </section>
    <main>
      <div>
        <a href="javascript:;" id="run">▶ 运行</a>
        <a href="javascript:;" id="pause" class="disabledLink">⏸ 暂停</a>
        <a href="javascript:;" id="stop" class="disabledLink">⏹ 终止</a>
        <a href="javascript:;" id="save" class="disabledLink">⬇ 保存JSON</a>
      </div>
      <div id="progress"></div>
      <div id="design"></div>
    </main>
  </body>
</html>
